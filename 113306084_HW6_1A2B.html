<!DOCTYPE html>

<style>
    #record {
        white-space: pre-line;
    }
</style>
<body>
	<h1>113306084_HW6_1A2B</h1>

	<input type = "text" id = "guess" maxlength = "4" placeholder = "請輸入4個不重複的數字">
	<button onclick = "myFunction()">猜!</button>

	<div id = "record">
		遊戲紀錄:
	</div>
	<script>
		var answerArray = buildRandom();
		var count = 0;
		//alert(answerArray);
		function myFunction(){

			var inputValue = document.getElementById("guess").value;

			if (inputValue.length == 4 && !isNaN(inputValue)){
				var numArray = inputValue.split('').map(Number);
				if (new Set(numArray).size != numArray.length) {alert("數字有重複"); document.getElementById("guess").value = ""; return;} 
			}

			else{alert("請輸入四位數"); document.getElementById("guess").value = ""; return;}

			count++;
			var numOfA = 0;
			var numOfB = 0;

			//alert(numArray);
			for (let i = 0; i < 4; i++){
				if (numArray[i] === answerArray[i]){numOfA++;}
				else if (answerArray.includes(numArray[i])){numOfB++;}
			}

			if (numOfA == 4){alert(`答對了，作答次數: ${count}`);}
			else {
				let add = `第 ${count}次: ${inputValue} --> ${numOfA}A${numOfB}B<br>`;
				document.getElementById("record").innerHTML += add;
			}




		}

		function buildRandom(){
			var numA = Math.floor(Math.random() * 10);
			var store = [numA];

			var numB = Math.floor(Math.random() * 10);
			while (numA == numB){numB = Math.floor(Math.random() * 10);}
			store.push(numB);

			var numC = Math.floor(Math.random() * 10);
			while (numA == numC){numC = Math.floor(Math.random() * 10);}
			store.push(numC);

			var numD = Math.floor(Math.random() * 10);
			while (numA == numD){numD = Math.floor(Math.random() * 10);}
			store.push(numD);

			return store;

		}










	</script>
</body>